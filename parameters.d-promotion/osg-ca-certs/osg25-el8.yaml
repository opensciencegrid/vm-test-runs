###################
# OSG 25 tests for EL8
# File format documention:
# https://github.com/opensciencegrid/vm-test-runs#running-osg-test-in-vm-universe
###################

platforms:
  - rocky_8.x86_64
  - alma_8.x86_64

sources:
  - opensciencegrid:master; 24; osg, osg-upcoming > 25/osg-minefield
  - opensciencegrid:master; 25; osg-minefield
  - opensciencegrid:master; 25; osg > osg-minefield

package_sets:
  #### Required ####
  # label - used for reporting, should be consistent across param files
  # packages - list of packages to install in the test run
  #### Optional ####
  # selinux - enable SELinux for the package set, otherwise Permissive mode (default: True)
  # osg_java - Pre-install OSG java packages (default: False)
  # rng - Install entropy generation package (default: False)
  ##################
  - label: Compute Entrypoint (Condor) (osg-ca-certs)
    packages:
      - osg-ca-certs
      - osg-ce-condor
      - htcondor-ce-view
  - label: Compute Entrypoint (Slurm) (osg-ca-certs)
    packages:
      - osg-ca-certs
      - osg-ce-slurm
      - htcondor-ce-view
      - slurm
      - slurm-slurmd
      - slurm-slurmctld
      - slurm-perlapi
      - slurm-slurmdbd
      - mariadb-server
  - label: Central Collector (osg-ca-certs)
    packages:
      - osg-ca-certs
      - htcondor-ce-collector
      - htcondor-ce-view
      - fetch-crl
  - label: Worker Node (privileged) (osg-ca-certs)
    packages:
      - osg-ca-certs
      - osg-wn-client
      - osg-oasis
      - apptainer-suid
  - label: Worker Node (privileged, tarball deps) (osg-ca-certs)
    packages:
      - osg-ca-certs
      - osg-update-data
      - osg-wn-client
  - label: XRootD (osg-ca-certs)
    packages:
      - osg-ca-certs
      - osg-xrootd-standalone
      - xrootd-multiuser
      - xrootd-client
      - voms-clients-cpp
  - label: GlideinwmsFrontend (osg-ca-certs)
    packages:
      - osg-ca-certs
      - glideinwms-vofrontend
  - label: GlideinwmsFactory (osg-ca-certs)
    packages:
      - osg-ca-certs
      - glideinwms-factory
  - label: HTVault-Config (osg-ca-certs)
    packages:
      - osg-ca-certs
      - htvault-config
      - htgettoken
  - label: OSDF Cache and Origin (osg-ca-certs)
    packages:
      - osg-ca-certs
      - osdf-cache
      - osdf-origin
  - label: Compute Entrypoint (Condor) (igtf-ca-certs)
    packages:
      - igtf-ca-certs
      - osg-ce-condor
      - htcondor-ce-view
  - label: Compute Entrypoint (Slurm) (igtf-ca-certs)
    packages:
      - igtf-ca-certs
      - osg-ce-slurm
      - htcondor-ce-view
      - slurm
      - slurm-slurmd
      - slurm-slurmctld
      - slurm-perlapi
      - slurm-slurmdbd
      - mariadb-server
  - label: Central Collector (igtf-ca-certs)
    packages:
      - igtf-ca-certs
      - htcondor-ce-collector
      - htcondor-ce-view
      - fetch-crl
  - label: Worker Node (privileged) (igtf-ca-certs)
    packages:
      - igtf-ca-certs
      - osg-wn-client
      - osg-oasis
      - apptainer-suid
  - label: Worker Node (privileged, tarball deps) (igtf-ca-certs)
    packages:
      - igtf-ca-certs
      - osg-update-data
      - osg-wn-client
  - label: XRootD (igtf-ca-certs)
    packages:
      - igtf-ca-certs
      - osg-xrootd-standalone
      - xrootd-multiuser
      - xrootd-client
      - voms-clients-cpp
  - label: GlideinwmsFrontend (igtf-ca-certs)
    packages:
      - igtf-ca-certs
      - glideinwms-vofrontend
  - label: GlideinwmsFactory (igtf-ca-certs)
    packages:
      - igtf-ca-certs
      - glideinwms-factory
  - label: HTVault-Config (igtf-ca-certs)
    packages:
      - igtf-ca-certs
      - htvault-config
      - htgettoken
  - label: OSDF Cache and Origin (igtf-ca-certs)
    packages:
      - igtf-ca-certs
      - osdf-cache
      - osdf-origin
